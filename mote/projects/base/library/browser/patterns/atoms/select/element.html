{% load mote_tags %}

<select {% if classes %}class="{% for v in classes.values %}{{ v }}{% if not forloop.last %} {% endif %}{% endfor %}"{% endif %}
{% for k, v in attrs.items %} {{ k }}="{{ v }}"{% if not forloop.last %} {% endif %}{% endfor %}>
    {% for item in items %}
        {% if item.option %}
            <option{% for k, v in item.option.attrs.items %} {{ k }}="{{ v }}"{% endfor %}>{{ item.option.text }}</option>
        {% elif item.group %}
            <optgroup{% for k, v in item.group.attrs.items %} {{ k }}="{{ v }}"{% endfor %}>
                {% for optgroup_option in item.group.options %}
                    <option{% for k, v in optgroup_option.attrs.items %} {{ k }}="{{ v }}"{% endfor %}>{{ optgroup_option.text }}</option>
                {% endfor %}
            </optgroup>
        {% endif %}
    {% endfor %}
</select>
